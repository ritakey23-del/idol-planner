<!DOCTYPE html>
<html lang="zh-Hant">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>KEY - HUNTER 應援練習室 (純 JS 版)</title>
    <script src="https://www.youtube.com/iframe_api"></script>
    
    <style>
        /* CSS 樣式區域 (與 BAD LOVE 版本相同，使用 SHINee 湖水綠強調色) */
        body { margin: 0; font-family: 'Helvetica Neue', Arial, sans-serif; background-color: #000; color: #fff; overflow: hidden; }
        .fanchant-container { display: flex; flex-direction: column; height: 100vh; }
        .video-wrapper { flex-shrink: 0; height: 200px; background: #111; overflow: hidden; display: flex; justify-content: center; align-items: center; }
        #youtube-player { width: 100%; height: 100%; }
        .lyrics-wrapper { flex-grow: 1; overflow-y: scroll; position: relative; mask-image: linear-gradient(to bottom, transparent, black 20%, black 80%, transparent); -webkit-mask-image: linear-gradient(to bottom, transparent, black 20%, black 80%, transparent); }
        .lyrics-content { padding: 0 20px; text-align: center; }
        .spacer { height: 40vh; }
        .lyric-line { padding: 12px 0; transition: all 0.3s ease; opacity: 0.3; font-size: 1.1rem; font-weight: 500; cursor: pointer; }
        .lyric-line.active { opacity: 1; transform: scale(1.1); }
        .lyric-line.active.idol-part { color: #ffffff; text-shadow: 0 0 10px rgba(255,255,255,0.5); }
        /* 粉絲應援：SHINee 湖水綠 */
        .lyric-line.active.fan-part { color: #79E5CB; font-weight: 800; font-size: 1.4rem; text-shadow: 0 0 15px #79E5CB, 0 0 30px #79E5CB; letter-spacing: 1px; }
        .badge { display: inline-block; font-size: 0.8rem; background: #79E5CB; color: #000; padding: 2px 6px; border-radius: 4px; margin-left: 8px; vertical-align: middle; transform: translateY(-2px); }
        .controls { flex-shrink: 0; padding: 10px 20px; background: #111; display: flex; justify-content: space-between; align-items: center; border-top: 1px solid #333; }
        .play-btn { background: #79E5CB; border: none; padding: 10px 24px; border-radius: 30px; font-weight: bold; font-size: 1rem; cursor: pointer; color: #000; transition: background 0.2s; }
        .play-btn:hover { background: #5dc3a3; }
        .status { font-family: monospace; color: #888; }
    </style>
</head>
<body>
    <div class="fanchant-container">
        <div class="video-wrapper">
            <div id="youtube-player"></div>
        </div>
        <div class="lyrics-wrapper" id="lyrics-wrapper">
            <div class="lyrics-content" id="lyrics-content">
                </div>
        </div>
        <div class="controls">
            <button id="play-btn" class="play-btn">載入中...</button>
            <div id="status" class="status">Time: 0:00</div>
        </div>
    </div>

    <script>
        // --- JavaScript 邏輯區域 ---

        // 1. 歌曲與資料 (KEY - HUNTER)
        const videoId = 'ktCF5D6ECk0'; // KEY 'HUNTER' Official MV ID
        const lyricsData = [
            // ** 警告: 以下時間點為估計值，請根據官方應援影片調整 **
            { time: 0.0, text: "(Intro - 節奏開始)", type: 'idol' },
            { time: 6.8, text: "SHINee! KEY! HUNTER!", type: 'fan' }, // 慣例性開場喊聲
            { time: 8.5, text: "긴장해 떨림을 느껴", type: 'idol' }, // 緊張地感受顫抖
            { time: 10.3, text: "눈을 뜬 나의 밤", type: 'idol' }, // 睜開眼的我的夜晚
            { time: 13.0, text: "KIM KI BUM!", type: 'fan' }, // 金起範!
            { time: 15.0, text: "이젠 내가 널 찾아가", type: 'idol' }, // 現在換我來找你
            { time: 17.5, text: "어둠 속에 갇힌 너", type: 'idol' }, // 被困在黑暗中的你
            { time: 20.0, text: "어디 가지 마", type: 'idol' }, // 不要去任何地方
            { time: 22.5, text: "I'm the Hunter!", type: 'fan' }, // 歌曲名稱應援
            { time: 25.0, text: "숨어봐, 내가 널 찾을 때까지", type: 'idol' }, // 躲起來吧，直到我找到你
            { time: 28.5, text: "키! (Ki!)", type: 'fan' }, // 單字喊聲
            { time: 30.0, text: "심장이 뛰어. 네가 내 먹잇감", type: 'idol' }, // 心臟跳動，你就是我的獵物
            { time: 33.5, text: "Hah! Hah! Hah!", type: 'fan' }, // 氣勢喊聲
            { time: 36.5, text: "Chorus 開始...", type: 'idol' },
            { time: 40.0, text: "應援結束 (請自行延伸)", type: 'idol' },
        ];

        // 2. 狀態管理 (略，與 BAD LOVE 版本相同)
        let player = null;
        let timerLoop = null;
        let isPlaying = false;
        let currentLineIndex = -1;
        const playButton = document.getElementById('play-btn');
        const statusDiv = document.getElementById('status');
        const lyricsContent = document.getElementById('lyrics-content');
        const lyricsWrapper = document.getElementById('lyrics-wrapper');

        // 3. YouTube API 初始化 (API 載入完成時自動呼叫)
        window.onYouTubeIframeAPIReady = function() { initPlayer(); };
